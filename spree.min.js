!function(e,t){function n(){function n(t){var n=e.getComputedStyle(t),r=+n.paddingLeft.slice(0,-2),o=+n.borderLeft.split(" ")[0].slice(0,-2),a=+n.marginLeft.slice(0,-2);I="margin-left:"+(r+o+a-13)+"px;padding-left:10px;border-left:3px solid "+nt[ot]+";"}function r(e,n){var r=e===at,a=e.length/3>>0,i=t.createElement("span"),s=t.createElement("span"),l=t.createElement("span"),d=t.createElement("div");i.style.float="right",s.className="spreeText",d.className="spreeaftwrap",r?s.innerText=e:(i.innerText=e.slice(0,a),s.innerText=e[a],l.innerText=e.slice(a+1)),d.appendChild(s),d.appendChild(l),n.innerHTML="",n.appendChild(d),n.appendChild(i);var p=s.offsetWidth/-2;s.style.marginLeft=p+"px",i.style.marginRight=-p+"px",r&&o(0)}function o(e){$?($=0,e&&C(),o.func()):($=1,e&&w())}function a(e){var t=Y/5;38===e?Y-=t:Y+=t,10>Y&&(Y=10),chrome&&chrome.storage&&chrome.storage.sync.set({gap:Y});var n=6e4/(Y+50);x(n)}function i(){W-=10,0>W&&(W=0)}function s(e){for(var t,n,r=0,o=10,a=e.length;a>r;r+=10,o+=10)n=e.slice(r,o),a>o&&(n+="-"),0===r?t=n:q.push(n);return t}function l(e){if(l.arr.push(e),50===l.arr.length){for(var t=0,n=0;50>n;n++)t+=l.arr[n];x(6e4/(t/50)),l.arr.length=0}}function d(e){var n=t.createElement("div");for(var r in e)e.hasOwnProperty(r)&&(n[r]=e[r]);return U.appendChild(n),n}function p(e){return U.appendChild(e),e}function f(){var e=t.createElement("div");e.id="colorDiv",nt.forEach(function(n){var r=t.createElement("div");r.className="spreeColor",r.style.backgroundColor=n,e.appendChild(r)}),z.appendChild(e),A=e.children,z.addEventListener("mouseover",u),z.addEventListener("mouseout",h),z.addEventListener("mousedown",g)}function c(e){if(-1!==e){var t=S.rules;t[17].style.color=nt[e],t[8].style.backgroundColor=rt[e],I=I.slice(0,-8)+nt[e]+";",O&&(O.style.cssText=I)}}function u(e){c(Q.call(A,e.target))}function h(e){e.toElement&&"spreeColor"===e.toElement.className||c(ot)}function g(e){ot=Q.call(A,e.target),chrome&&chrome.storage&&chrome.storage.sync.set({colorIndex:ot})}function x(e){B.innerText="~"+e.toString().slice(0,6)+" wpm"}function m(e,t){return e===U||null===e?t:m(e.offsetParent,t+e.offsetTop)}function v(e,t){return e===U||null===e?t:v(e.offsetParent,t+e.offsetLeft)}function w(){var e=_[tt];if(e){var n=e.words,r=e.gaps,o=e.node;if(o){for(var a=o.parentNode,i=W-1,s=e.words[i],l=j,d=j,p=0;i>p;p++)l+=r[p]+n[p];for(l+=r[i],p=i+1;p<r.length;p++){var f=r[p];n[p]&&(f+=n[p]),d+=f}var c=t.createTextNode(l),u=t.createTextNode(d),h=t.createElement("span");h.className="spreeHL",h.innerText=s,a.insertBefore(c,o),a.insertBefore(h,o),a.insertBefore(u,o),a.removeChild(o)}}}function C(){var e=t.getElementsByClassName("spreeHL")[0];if(e){var n=e.previousSibling,r=e.nextSibling,o=_[tt].node,a=e.parentNode;a.insertBefore(o,n),a.removeChild(n),a.removeChild(e),a.removeChild(r)}}function T(e){var t=e.tagName;if("PRE"==t&&_.push({words:[at],gaps:["",""],node:e}),"IMG"!=t&&"SCRIPT"!=t&&"EMBED"!=t&&"PRE"!=t&&"VIDEO"!=t&&"TABLE"!=t&&"FORM"!=t&&"FIGURE"!=t){var n=e.childNodes,r=n.length;if(r)for(var o=0;r>o;o++)T(n[o]);else 3===e.nodeType&&_.push({words:e.nodeValue.split(/\s+/),gaps:e.nodeValue.split(/\S+/),node:e})}}function b(t,n){var a=t.nextElementSibling;if(T(t),!_.length)return a?setTimeout(function(){b(a,n)}):void 0;et=_.length-1;var i=_[tt].words,d=i.length;W=0,O=t,t.offsetTop+t.clientHeight+J>H+e.scrollY&&e.scrollTo(0,t.offsetTop+J-50),V=t.style.cssText,t.style.cssText=I,function p(){if(!K){if($)return o.func=p,void 0;if(et>tt||d>W||q.length){var e,t=0;if(q.length?e=q.shift():(W===d&&(i=_[++tt].words,d=i.length,W=0),e=i[W++]),e.length>20&&(e=s(e)),e.length){r(e,n);var f=e[0],c=e[e.length-1];f===f.toUpperCase()&&(t+=Y/1.5),","===c||";"===c?t+=Y/5:("."===c||"?"===c||"!"===c)&&(t+=Y/2.5)}var u=Y+t+8*e.length;l(u),setTimeout(p,u)}else F(),a&&setTimeout(function(){b(a,n)})}}()}function E(){O&&(O.style.cssText=V)}function y(){M.innerHTML="<div class='spreeaftwrap'><span class='spreeText' style='margin-left:-50px'>Spree...</span></div>"}function F(){E(),O=null,_.length=0,tt=0}function L(){K=1,G=0,J=0,$=0,C(),F(),y(),D(1),U.removeChild(M),U.removeChild(B),U.removeChild(P),U.removeChild(z),M.innerHTML=Z,e.removeEventListener("keydown",k),P.removeEventListener("mousedown",R)}function R(){D(0),e.addEventListener("mousedown",N)}function N(t){t.target!==P&&"spreeColor"!==t.target.className&&(D(1),e.removeEventListener("mousedown",N))}function k(e){e.preventDefault();var t=e.keyCode;if(18!==t)return 38===t||40===t?a(t):32===t?o(1):37===t?i():(L(),void 0)}var H,S,D,A,B,M,P,z,I,O,V,W=0,G=0,U=t.body,Y=100,K=0,X=1,j="",q=[],J=0,Q=Array.prototype.indexOf,Z="<div class='spreeaftwrap'><span class='spreeText' style='margin-left:-50px'>Spree...</span></div>",$=0,_=[],et=0,tt=0,nt=["#FFA500","#99793D","#FF6200","#40FFCE","#00FF76","#FFCF40","#1500FF","#773D99","#A000FF","#FF8700","#5E3D99","#444444","#00B5FF","#998B3D","#00F8FF","#FF0F26"],rt=["#ffd530","#c9a96d","#ff9230","#70fffe","#30ffa6","#ffff70","#4530ff","#a76dc9","#d030ff","#ffb730","#8e6dc9","#747474","#30e5ff","#c9bb6d","#30ffff","#ff3f56"],ot=0,at=" (code) ";chrome&&chrome.storage&&chrome.storage.sync.get(null,function(e){e.gap&&(Y=e.gap),e.colorIndex&&(ot=e.colorIndex)}),o.func=function(){},l.arr=[],D=function(){var e=0,t=1;return function(n){t&&(f(),t=0),e||n?(P.innerText="Controls ▾",z.style.cssText="width:0;height:0;",e=0):(P.innerText="Controls ▴",z.style.cssText="width:140px;height:140px",e=1)}}(),e.addEventListener("mousedown",function(t){var r=t.target;if(t.altKey===!0&&0===G&&"HTML"!==r.tagName&&"SELECT"!==r.tagName&&(0===t.button||document.all&&1===t.button)){var o=t.pageX,a=t.pageY,i=r.clientWidth,s=r.clientHeight;i||(i=r.offsetWidth,s=r.offsetHeight);var l=m(r,0),f=v(r,0);if(o-f>i||a-l>s)return;K=0,J=m(r.offsetParent,0),n(r),c(ot),G=1,H=e.innerHeight,X?(M=d({id:"spreeCon",className:"spreeAtop spreeText",innerHTML:Z}),P=d({id:"spreeControls",className:"spreeAtop spreeText",innerText:"Controls ▾"}),z=d({id:"spreeControlPane",className:"spreeAtop spreeText"}),B=d({id:"spreewpm",className:"spreeAtop spreeText"}),X=0):(p(M),p(P),p(z),p(B)),x(6e4/(Y+50)),setTimeout(function(){b(r,M)},500),e.addEventListener("keydown",k),P.addEventListener("mousedown",R)}}),S=function(){var e=t.createElement("style");e.appendChild(t.createTextNode("")),t.head.appendChild(e);var n=e.sheet;return n.addRule("#spreeCon","color:#444;width:600px;height:100px;top:50%;left:50%;margin:-50px 0 0 -300px;box-shadow:0 4px 6px -4px #666, 0 1px 2px 0 #666;text-align:left;font-size:36px;line-height:100px;font-weight:300;padding:0;",0),n.addRule(".spreeaftwrap","float:right;font-size:36px;border:0;width:350px;line-height:100px;display:inline-block;background:#fffefc;",1),n.addRule(".spreeaftwrap >span","float:left;line-height:100px;font-size:36px;",2),n.addRule("#spreewpm","top:10px;left:10px;",3),n.addRule("#spreeControls","top:10px;right:10px;-webkit-touch-callout: none;-webkit-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select: none;",4),n.addRule("#spreeControls:hover","cursor:pointer",5),n.addRule(".spreeaftwrap>span:before",'content: "";border-left: 2px solid transparent;border-right:2px solid transparent; border-top:25px solid #666;height: 0;width:0;position:absolute;left: 247px;',6),n.addRule(".spreeaftwrap>span:after",'content: "";border-left: 2px solid transparent;border-right:2px solid transparent; border-bottom:25px solid #666;height:0;width:0;position:absolute;left: 248px;bottom:0px;',7),n.addRule(".spreeHL","background-color:#ffd530;",8),n.insertRule("@media screen and (max-width : 600px){.spreeCon{margin:-50px 0 0 0; width:100%;left:0}.spreeaftwrap{width:60%;}.spreeaftwrap>span:before,.spreeaftwrap>span:after{left:39.4%;}}",9),n.addRule(".spreeCon >span","line-height:100px",10),n.addRule("#spreeControlPane","top:33px;right:10px;width:0;height:0;overflow:hidden;padding:0;box-shadow:0px 2px 1px -1px #666;-webkit-transition: height 0.1s ease-out,width 0.1s ease-out;-moz-transition: height 0.1s ease-out,width 0.1s ease-out;-o-transition: height 0.1s ease-out,width 0.1s ease-out;transition: height 0.1s ease-out,width 0.1s ease-out;",11),n.addRule(".spreeAtop","position:fixed;background:#fffefc;text-align:center;box-shadow:0 1px 1px 0 #666;z-index:591233;padding:2px 4px;width:auto;height:auto;font-size:14px;font-family:Helvetica;",12),n.addRule(".spreeColor","width:35px;height:35px;float:left;",13),n.addRule("#colorDiv","width:140px;height:140px;background:#fffefc;float:right;margin:0;padding:0;border:0;",14),n.addRule("#colorDiv:hover","cursor:pointer;",15),n.addRule(".spreeColor:active","opacity:0.7",16),n.addRule(".spreeText","color:#ffa500;",17),n}()}"loaded"===t.readyState||"complete"===t.readyState?n():e.addEventListener("DOMContentLoaded",n)}(window,document);